<link href="https://fonts.googleapis.com/css?family=Inconsolata&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
<link href="style.css" rel="stylesheet">


<body style="text-align:center; background:#333">
<h1 style="font-family:'Roboto'; font-size:500%">fluid</h1>
	<div id = "promptwrapper">
		<div id="prompt" style="float:left">The quick brown fox jumped over the lazy dog.</div>
	</div>

	<br><br><br><br>
	<input type="text" id="typeinput">

	<br><br><br>

	<button onclick="newPrompt()">Refresh</button>


</body>

<script src="prompts.js"></script>

<script>

var startTime = 0;

var promptArr = document.getElementById('prompt').innerHTML.split(" ");
var promptDiv = document.getElementById('prompt');

var input = document.getElementById('typeinput');
var curr = 0;

input.addEventListener('input', function() {

	alert(this.value.length);
	if (curr === 0 && this.value.length === 0){
		startTime = Date.now();
	}

	alert(startTime);

    // Get cursor position
    var start = this.selectionStart;

    // Get last typed character
    var lastChar = String.fromCharCode(this.value.charCodeAt(start - 1));

    if((lastChar === ' ' && this.value === promptArr[curr]+" ") || (curr === promptArr.length-1 && this.value === promptArr[curr])) {
    	promptDiv.innerHTML = promptDiv.innerHTML.substring(promptArr[curr].length+1);
        // clear the board
        this.value = "";
        curr++;
    }

    if (this.value.length > 0 && this.value !== promptArr[curr].substring(0, this.value.length)){
    	this.style.background = "#d77";
    } else {
    	this.style.background = "#fff";
    }

    if (curr === promptArr.length){
    	document.getElementById('promptwrapper').style.background = "#7d7";
    	promptDiv.innerHTML = "you're done!";
    }

});


function newPrompt() {
	var rand = Math.floor(Math.random() * prompts.length);
	promptDiv.innerHTML = prompts[rand];
	curr = 0;
}


</script>